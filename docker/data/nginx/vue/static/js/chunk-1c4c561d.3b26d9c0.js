(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c4c561d"],{5062:function(e,t,i){"use strict";i("d9fa")},d9fa:function(e,t,i){},ded3:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"6px"},attrs:{id:"mediaServer"}},[a("el-card",{staticStyle:{"margin-bottom":"6px"}},[a("el-form",{ref:"queryForm",staticStyle:{"margin-bottom":"-20px"},attrs:{model:e.queryParams,inline:!0,"label-width":"75px"}},[a("el-form-item",[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:add"],expression:"['iot:device:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.add}},[e._v("新增节点")])],1),a("el-form-item",[a("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-refresh",size:"mini"},on:{click:e.getServerList}},[e._v("刷新")])],1)],1)],1),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"padding-bottom":"100px"}},[a("el-row",{attrs:{gutter:30}},e._l(e.mediaServerList,(function(t,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"30px","text-align":"center"},attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("el-card",{staticClass:"card-item",attrs:{shadow:"always"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:15}},[a("el-descriptions",{staticStyle:{"white-space":"nowrap"},attrs:{column:1,size:"mini"}},[a("el-descriptions-item",{attrs:{label:"配置名称"}},[e._v(" "+e._s(t.serverId)+" ")]),a("el-descriptions-item",{attrs:{label:"服务器IP"}},[e._v(" "+e._s(t.ip)+" ")]),a("el-descriptions-item",{attrs:{label:"播放协议"}},[e._v(" "+e._s(t.protocol)+" ")]),a("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(" "+e._s(e.parseTime(t.createTime,"{y}-{m}-{d}"))+" ")])],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-image",{attrs:{src:i("e1e7"),fit:"fit"}})],1)])],1),a("el-button-group",{staticStyle:{"margin-top":"10px"}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:remove"],expression:"['iot:device:remove']"}],staticStyle:{padding:"5px 10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return e.del(t)}}},[e._v("删除")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:add"],expression:"['iot:device:add']"}],staticStyle:{padding:"5px 15px"},attrs:{type:"primary",size:"mini",icon:"el-icon-view"},on:{click:function(i){return e.view(t)}}},[e._v("查看")]),e.istrue?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:edit"],expression:"['iot:device:edit']"}],staticStyle:{padding:"5px 15px"},attrs:{type:"success",size:"mini",icon:"el-icon-odometer",loading:!0,disabled:""}},[e._v("重启中... ")]):a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:device:edit"],expression:"['iot:device:edit']"}],staticStyle:{padding:"5px 15px"},attrs:{type:"success",size:"mini",icon:"el-icon-odometer"},nativeOn:{click:function(i){return i.preventDefault(),e.edit(t)}}},[e._v("编辑 ")])],1)],1)],1)})),1),0==e.total?a("el-empty",{attrs:{description:"暂无数据，请添加流媒体服务器节点"}}):e._e(),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize,pageSizes:[12,24,36,60]},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getServerList}})],1),a("mediaServerEdit",{ref:"mediaServerEdit",attrs:{"edit-flag":e.editFlag}})],1)},r=[],n=i("7837"),s=i("5a6f"),o={name:"MediaServer",components:{mediaServerEdit:n["default"]},data:function(){return{loading:!0,editFlag:!1,istrue:!1,mediaServerList:[],winHeight:window.innerHeight-200,updateLooper:!1,currentPage:1,count:15,num:this.getNumberByWidth(),total:0,queryParams:{pageNum:1,pageSize:10}}},computed:{},mounted:function(){this.initData()},destroyed:function(){clearTimeout(this.updateLooper)},methods:{initData:function(){this.getServerList()},pageNumChange:function(e){this.queryParams.pageNum=e,this.getServerList()},pageSizeChange:function(e){this.queryParams.pageSize=e,this.getServerList()},getServerList:function(){var e=this;this.loading=!0,Object(s["e"])(this.queryParams).then((function(t){e.mediaServerList=t.rows,e.total=t.total,e.loading=!1}))},add:function(){this.$refs.mediaServerEdit.openDialog(null,this.initData)},view:function(e){this.$refs.mediaServerEdit.openDialog(e,this.initData,this.editFlag),this.editFlag=!1},edit:function(e){var t=this;this.$refs.mediaServerEdit.openDialog(e,this.initData,this.editFlag),this.editFlag=!0;var i=5,a=setInterval((function(){t.istrue=!0,i--,i<0&&(t.istrue=!1,clearInterval(a))}),1e3)},del:function(e){var t=this,i=e.id||this.ids;this.$modal.confirm('是否确认删除流媒体服务器配置编号为"'+i+'"的数据项？').then((function(){Object(s["c"])(i)})).then((function(){t.getServerList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},getNumberByWidth:function(){for(var e=[1,2,3,4,6,8,12,24],t=window.innerWidth-30,i=20,a=360,r=(t+i)/(a+i),n=Math.ceil(24/r),s=24,o=0;o<e.length;o++){var l=e[o];if(o+1>=e.length)return 24;if(l<=n&&e[o+1]>n)return l}return s}}},l=o,d=(i("5062"),i("2877")),c=Object(d["a"])(l,a,r,!1,null,"0f21bf3a",null);t["default"]=c.exports},e1e7:function(e,t,i){e.exports=i.p+"static/img/zlm-logo.5f8bbf78.png"}}]);
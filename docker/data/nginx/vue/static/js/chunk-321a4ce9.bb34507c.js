(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-321a4ce9","chunk-3de8fc48"],{"05a0":function(t,e,n){},"0eb6":function(t,e,n){"use strict";var a=n("23e7"),i=n("7c37"),r=n("d066"),c=n("d039"),o=n("7c73"),s=n("5c6c"),l=n("9bf2").f,d=n("cb2d"),u=n("edd0"),f=n("1a2d"),p=n("19aa"),h=n("825a"),v=n("aa1f"),m=n("e391"),b=n("cf98"),g=n("0d26"),y=n("69f3"),E=n("83ab"),O=n("c430"),_="DOMException",I="DATA_CLONE_ERR",R=r("Error"),S=r(_)||function(){try{var t=r("MessageChannel")||i("worker_threads").MessageChannel;(new t).port1.postMessage(new WeakMap)}catch(e){if(e.name==I&&25==e.code)return e.constructor}}(),D=S&&S.prototype,k=R.prototype,w=y.set,j=y.getterFor(_),N="stack"in R(_),C=function(t){return f(b,t)&&b[t].m?b[t].c:0},T=function(){p(this,x);var t=arguments.length,e=m(t<1?void 0:arguments[0]),n=m(t<2?void 0:arguments[1],"Error"),a=C(n);if(w(this,{type:_,name:n,message:e,code:a}),E||(this.name=n,this.message=e,this.code=a),N){var i=R(e);i.name=_,l(this,"stack",s(1,g(i.stack,1)))}},x=T.prototype=o(k),A=function(t){return{enumerable:!0,configurable:!0,get:t}},M=function(t){return A((function(){return j(this)[t]}))};E&&(u(x,"code",M("code")),u(x,"message",M("message")),u(x,"name",M("name"))),l(x,"constructor",s(1,T));var U=c((function(){return!(new S instanceof R)})),P=U||c((function(){return k.toString!==v||"2: 1"!==String(new S(1,2))})),L=U||c((function(){return 25!==new S(1,"DataCloneError").code})),z=U||25!==S[I]||25!==D[I],$=O?P||L||z:U;a({global:!0,constructor:!0,forced:$},{DOMException:$?T:S});var q=r(_),H=q.prototype;for(var B in P&&(O||S===q)&&d(H,"toString",v),L&&E&&S===q&&u(H,"code",A((function(){return C(h(this).name)}))),b)if(f(b,B)){var V=b[B],F=V.s,J=s(6,V.c);f(q,F)||l(q,F,J),f(H,F)||l(H,F,J)}},"22ca":function(t,e,n){"use strict";n("f0b8")},"55ff":function(t,e,n){"use strict";n("05a0")},"584f":function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"n",(function(){return r})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return o})),n.d(e,"j",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"f",(function(){return u})),n.d(e,"h",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"o",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return b})),n.d(e,"i",(function(){return g}));var a=n("b775");function i(t){return Object(a["a"])({url:"/iot/device/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/iot/device/unAuthlist",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/iot/device/listByGroup",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/iot/device/shortList",method:"get",params:t})}function s(){return Object(a["a"])({url:"/iot/device/all",method:"get"})}function l(t){return Object(a["a"])({url:"/iot/device/"+t,method:"get"})}function d(t){return Object(a["a"])({url:"/iot/device/synchronization/"+t,method:"get"})}function u(t){return Object(a["a"])({url:"/iot/device/getDeviceBySerialNumber/"+t,method:"get"})}function f(){return Object(a["a"])({url:"/iot/device/statistic",method:"get"})}function p(t){return Object(a["a"])({url:"/iot/device/runningStatus",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/iot/device",method:"post",data:t})}function v(t){return Object(a["a"])({url:"/iot/device",method:"put",data:t})}function m(t){return Object(a["a"])({url:"/iot/device/"+t,method:"delete"})}function b(t){return Object(a["a"])({url:"/iot/device/generator",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/iot/device/getMqttConnectData",method:"get",params:t})}},"58ce":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%","background-color":"#ffffff",overflow:"auto"},attrs:{id:"DeviceTree"}},[n("div",{staticStyle:{"line-height":"4vh"}},[t._v("设备列表")]),n("el-tree",{ref:"tree",staticStyle:{"min-width":"100%",display:"inline-block !important"},attrs:{props:t.defaultProps,"current-node-key":t.selectchannelId,"default-expanded-keys":t.expandIds,"highlight-current":!0,load:t.loadNode,lazy:"","node-key":"id"},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node;e.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[0===a.data.type&&a.data.online?n("span",{staticClass:"device-online iconfont icon-jiedianleizhukongzhongxin2",attrs:{title:"在线设备"}}):t._e(),0!==a.data.type||a.data.online?t._e():n("span",{staticClass:"device-offline iconfont icon-jiedianleizhukongzhongxin2",attrs:{title:"离线设备"}}),3===a.data.type&&a.data.online?n("span",{staticClass:"device-online iconfont icon-shebeileijiankongdian",attrs:{title:"在线通道"}}):t._e(),3!==a.data.type||a.data.online?t._e():n("span",{staticClass:"device-offline iconfont icon-shebeileijiankongdian",attrs:{title:"在线通道"}}),4===a.data.type&&a.data.online?n("span",{staticClass:"device-online iconfont icon-shebeileiqiuji",attrs:{title:"在线通道-球机"}}):t._e(),4!==a.data.type||a.data.online?t._e():n("span",{staticClass:"device-offline iconfont icon-shebeileiqiuji",attrs:{title:"在线通道-球机"}}),5===a.data.type&&a.data.online?n("span",{staticClass:"device-online iconfont icon-shebeileibanqiu",attrs:{title:"在线通道-半球"}}):t._e(),5!==a.data.type||a.data.online?t._e():n("span",{staticClass:"device-offline iconfont icon-shebeileibanqiu",attrs:{title:"在线通道-半球"}}),6===a.data.type&&a.data.online?n("span",{staticClass:"device-online iconfont icon-shebeileiqiangjitongdao",attrs:{title:"在线通道-枪机"}}):t._e(),6!==a.data.type||a.data.online?t._e():n("span",{staticClass:"device-offline iconfont icon-shebeileiqiangjitongdao",attrs:{title:"在线通道-枪机"}}),a.data.online?n("span",{staticClass:"device-online",staticStyle:{"padding-left":"1px"}},[t._v(t._s(a.label))]):t._e(),a.data.online?t._e():n("span",{staticClass:"device-offline",staticStyle:{"padding-left":"1px"}},[t._v(t._s(a.label))])])}}])})],1)},i=[],r=(n("14d9"),n("99af"),n("b0c0"),n("f5a7")),c=n("584f"),o={name:"DeviceTree",data:function(){return{total:0,channelList:[],DeviceData:[],expandIds:[],selectData:{},selectchannelId:"",defaultProps:{children:"children",label:"name",isLeaf:"isLeaf"},queryParams:{pageNum:1,pageSize:100,status:3,deviceType:3}}},props:["onlyCatalog","clickEvent"],mounted:function(){this.selectchannelId="",this.expandIds=["0"]},methods:{handleNodeClick:function(t,e,n){if(this.selectData=e.data,this.selectchannelId=e.data.value,0!==e.level){var a=this.$refs.tree.getNode(t.userData.channelSipId);"function"==typeof this.clickEvent&&e.level>1&&this.clickEvent(a.data.userData)}},loadNode:function(t,e){var n=this;if(0===t.level)Object(c["m"])(this.queryParams).then((function(t){var n=t.rows;if(n.length>0){for(var a=[],i=0;i<n.length;i++){var r={name:n[i].deviceName,isLeaf:!1,id:n[i].serialNumber,type:0,online:3===n[i].status,userData:n[i]};a.push(r)}e(a)}else e([])}));else{var a=[];Object(r["b"])(t.data.userData.serialNumber).then((function(t){null!=t.data?(a=a.concat(t.data),n.channelDataHandler(a,e)):e([])}))}},channelDataHandler:function(t,e){if(t.length>0){for(var n=[],a=0;a<t.length;a++){var i=t[a],r=i.id.substring(10,13);console.log("channelType: "+r);var c=3;if(i.id.length<=10)c=2;else if(i.id.length>14){var o=i.id.substring(10,13);"111"!==o&&"112"!==o&&"118"!==o&&"131"!==o&&"132"!==o?c=-1:1===i.basicData.ptztype?c=4:2===i.basicData.ptztype?c=5:3!==i.basicData.ptztype&&4!==i.basicData.ptztype||(c=6)}else(i.basicData.subCount>0||1===i.basicData.parental)&&(c=2);var s={name:i.name||i.id,isLeaf:!0,id:i.id,deviceId:i.deviceId,type:c,online:2===i.status,userData:i.basicData};"111"!==r&&"112"!==r&&"118"!==r&&"131"!==r&&"132"!==r||n.push(s)}e(n)}else e([])},reset:function(){this.$forceUpdate()}},destroyed:function(){}},s=o,l=(n("55ff"),n("2877")),d=Object(l["a"])(s,a,i,!1,null,null,null);e["default"]=d.exports},"7c37":function(t,e,n){var a=n("605d");t.exports=function(t){try{if(a)return Function('return require("'+t+'")')()}catch(e){}}},"81b2":function(t,e,n){var a=n("23e7"),i=n("d066"),r=n("e330"),c=n("d039"),o=n("577e"),s=n("1a2d"),l=n("d6d6"),d=n("b917").ctoi,u=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,p=/[=]+$/,h=i("atob"),v=String.fromCharCode,m=r("".charAt),b=r("".replace),g=r(u.exec),y=c((function(){return""!==h(" ")})),E=!c((function(){h("a")})),O=!y&&!E&&!c((function(){h()})),_=!y&&!E&&1!==h.length;a({global:!0,enumerable:!0,forced:y||E||O||_},{atob:function(t){if(l(arguments.length,1),O||_)return h(t);var e,n,a=b(o(t),f,""),r="",c=0,y=0;if(a.length%4==0&&(a=b(a,p,"")),a.length%4==1||g(u,a))throw new(i("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(e=m(a,c++))s(d,e)&&(n=y%4?64*n+d[e]:d[e],y++%4&&(r+=v(255&n>>(-2*y&6))));return r}})},"8bd4":function(t,e,n){var a=n("d066"),i=n("d44e"),r="DOMException";i(a(r),r)},aa1f:function(t,e,n){"use strict";var a=n("83ab"),i=n("d039"),r=n("825a"),c=n("7c73"),o=n("e391"),s=Error.prototype.toString,l=i((function(){if(a){var t=c(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==s.call(t))return!0}return"2: 1"!==s.call({message:1,name:2})||"Error"!==s.call({})}));t.exports=l?function(){var t=r(this),e=o(t.name,"Error"),n=o(t.message);return e?n?e+": "+n:e:n}:s},adbd:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{padding:"6px"}},[n("el-card",{staticStyle:{width:"100vw",height:"91vh"},attrs:{id:"devicePosition","body-style":{padding:"0px"}}},[n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"91vh"},attrs:{"element-loading-text":"拼命加载中"}},[n("el-aside",{staticStyle:{"background-color":"#ffffff"},attrs:{width:"250px"}},[n("DeviceTree",{attrs:{clickEvent:t.clickEvent}})],1),n("el-main",{staticStyle:{padding:"0"}},[n("div",{staticStyle:{"text-align":"left","font-size":"17px","line-height":"5vh"},attrs:{height:"5vh"}},[t._v(" 分屏: "),n("i",{staticClass:"el-icon-full-screen btn",class:{active:1==t.spilt},on:{click:function(e){t.spilt=1}}}),n("i",{staticClass:"el-icon-menu btn",class:{active:4==t.spilt},on:{click:function(e){t.spilt=4}}}),n("i",{staticClass:"el-icon-s-grid btn",class:{active:9==t.spilt},on:{click:function(e){t.spilt=9}}})]),n("div",{staticStyle:{height:"85vh",display:"flex","flex-wrap":"wrap"}},t._l(t.spilt,(function(e){return n("div",{key:e,staticClass:"play-box",class:{redborder:t.playerIdx==e-1},style:t.liveStyle,on:{click:function(n){t.playerIdx=e-1}}},[t.videoUrl[e-1]?n("player",{ref:"player",refInFor:!0,attrs:{videoUrl:t.videoUrl[e-1],fluent:"",autoplay:""},on:{screenshot:t.shot,destroy:t.destroy}}):n("div",{staticStyle:{color:"#ffffff","font-size":"30px","font-weight":"bold"}},[t._v(t._s(e))])],1)})),0)])],1)],1)],1)},i=[],r=(n("d3b7"),n("e9c4"),n("81b2"),n("0eb6"),n("b7ef"),n("8bd4"),n("ace4"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("986a"),n("1d02"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("3b3a")),c=n("58ce"),o=n("e2de"),s={name:"SplitView",components:{player:r["default"],DeviceTree:c["default"]},data:function(){return{videoUrl:[""],spilt:1,playerIdx:0,updateLooper:0,count:15,total:0,loading:!1}},mounted:function(){},created:function(){this.checkPlayByParam()},computed:{liveStyle:function(){var t=this,e={width:"81%",height:"100%"};switch(this.spilt){case 4:e={width:"40%",height:"49%"};break;case 9:e={width:"27%",height:"32%"};break}return this.$nextTick((function(){for(var e=0;e<t.spilt;e++){var n=t.$refs.player;n&&n[e]&&n[e].updatePlayerDomSize()}})),e}},watch:{spilt:function(t){var e=this;console.log("切换画幅;"+t);for(var n=this,a=function(t){if(!n.$refs["player"+t])return"continue";e.$nextTick((function(){n.$refs["player"+t]instanceof Array?n.$refs["player"+t][0].resize():n.$refs["player"+t].resize()}))},i=1;i<=t;i++)a(i);window.localStorage.setItem("split",t)},"$route.fullPath":"checkPlayByParam"},destroyed:function(){clearTimeout(this.updateLooper)},methods:{destroy:function(t){console.log(t),this.clear(t.substring(t.length-1))},clickEvent:function(t){t.channelSipId&&this.sendDevicePush(t)},sendDevicePush:function(t){var e=this;this.save(t);var n=t.deviceSipId,a=t.channelSipId;console.log("通知设备推流1："+n+" : "+a);var i=this.playerIdx,r=this;this.loading=!0,Object(o["k"])(n,a).then((function(n){console.log("开始播放："+e.deviceId+" : "+e.channelId),console.log("流媒体信息："+n.data);var a=n.data;console.log("playurl："+a.playurl),t.playUrl=a.playurl,t.streamId=a.streamId,r.setPlayUrl(t.playUrl,i)})).finally((function(){r.loading=!1}))},setPlayUrl:function(t,e){this.$set(this.videoUrl,e,t);var n=this;setTimeout((function(){window.localStorage.setItem("videoUrl",JSON.stringify(n.videoUrl))}),100)},checkPlayByParam:function(){var t=this.$route.query,e=t.deviceId,n=t.channelId;e&&n&&this.sendDevicePush({deviceId:e,channelId:n})},shot:function(t){var e=function(t){for(var e=t.split(";base64,"),n=e[0].split(":")[1],a=window.atob(e[1]),i=a.length,r=new Uint8Array(i),c=0;c<i;++c)r[c]=a.charCodeAt(c);return new Blob([r],{type:n})},n=document.createElement("a"),a=e(t),i=document.createEvent("HTMLEvents");i.initEvent("click",!0,!0),n.download="截图",n.href=URL.createObjectURL(a),n.click()},save:function(t){var e=window.localStorage.getItem("playData")||"[]",n=JSON.parse(e);n[this.playerIdx]=t,window.localStorage.setItem("playData",JSON.stringify(n))},clear:function(t){var e=window.localStorage.getItem("playData")||"[]",n=JSON.parse(e);n[t-1]=null,console.log(n),window.localStorage.setItem("playData",JSON.stringify(n))}}},l=s,d=(n("fb24"),n("22ca"),n("2877")),u=Object(d["a"])(l,a,i,!1,null,null,null);e["default"]=u.exports},b7ef:function(t,e,n){"use strict";var a=n("23e7"),i=n("da84"),r=n("d066"),c=n("5c6c"),o=n("9bf2").f,s=n("1a2d"),l=n("19aa"),d=n("7156"),u=n("e391"),f=n("cf98"),p=n("0d26"),h=n("83ab"),v=n("c430"),m="DOMException",b=r("Error"),g=r(m),y=function(){l(this,E);var t=arguments.length,e=u(t<1?void 0:arguments[0]),n=u(t<2?void 0:arguments[1],"Error"),a=new g(e,n),i=b(e);return i.name=m,o(a,"stack",c(1,p(i.stack,1))),d(a,this,y),a},E=y.prototype=g.prototype,O="stack"in b(m),_="stack"in new g(1,2),I=g&&h&&Object.getOwnPropertyDescriptor(i,m),R=!!I&&!(I.writable&&I.configurable),S=O&&!R&&!_;a({global:!0,constructor:!0,forced:v||S},{DOMException:S?y:g});var D=r(m),k=D.prototype;if(k.constructor!==D)for(var w in v||o(k,"constructor",c(1,D)),f)if(s(f,w)){var j=f[w],N=j.s;s(D,N)||o(D,N,c(6,j.c))}},b917:function(t,e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a={},i=0;i<66;i++)a[n.charAt(i)]=i;t.exports={itoc:n,ctoi:a}},ba10:function(t,e,n){},cf98:function(t,e){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e2de:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"k",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return h}));var a=n("b775");function i(t){return Object(a["a"])({url:"/sip/channel/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/sip/channel/"+t,method:"get"})}function c(t,e){return Object(a["a"])({url:"/sip/channel/"+t,method:"post",data:e})}function o(t){return Object(a["a"])({url:"/sip/channel/"+t,method:"delete"})}function s(t,e){return Object(a["a"])({url:"/sip/player/play/"+t+"/"+e,method:"get"})}function l(t,e,n){return Object(a["a"])({url:"/sip/player/playback/"+t+"/"+e,method:"get",params:n})}function d(t,e){return Object(a["a"])({url:"/sip/player/closeStream/"+t+"/"+e,method:"get"})}function u(t,e,n){return Object(a["a"])({url:"/sip/player/playbackPause/"+t+"/"+e+"/"+n,method:"get"})}function f(t,e,n){return Object(a["a"])({url:"/sip/player/playbackReplay/"+t+"/"+e+"/"+n,method:"get"})}function p(t,e,n,i){return Object(a["a"])({url:"/sip/player/playbackSeek/"+t+"/"+e+"/"+n,method:"get",params:i})}function h(t,e,n,i){return Object(a["a"])({url:"/sip/player/playbackSpeed/"+t+"/"+e+"/"+n,method:"get",params:i})}},f0b8:function(t,e,n){},f5a7:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o}));var a=n("b775");function i(t){return Object(a["a"])({url:"/sip/device/listchannel/"+t,method:"get"})}function r(t){return Object(a["a"])({url:"/sip/device/sipid/"+t,method:"delete"})}function c(t,e,n){return Object(a["a"])({url:"/sip/ptz/direction/"+t+"/"+e,method:"post",data:n})}function o(t,e,n){return Object(a["a"])({url:"/sip/ptz/scale/"+t+"/"+e,method:"post",data:n})}},fb24:function(t,e,n){"use strict";n("ba10")}}]);
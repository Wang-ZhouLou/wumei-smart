(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32cc1227"],{"0913":function(t,e,i){"use strict";i("1fea")},"1fea":function(t,e,i){},"97d6":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root"},[i("div",{staticClass:"container-shell"},[i("div",{ref:"container",attrs:{id:"container"}})])])},o=[],a=i("c7eb"),s=i("1da1"),l=(i("a9e3"),i("ac1f"),i("00b4"),i("f5a7")),r={},c={name:"player",props:{playerinfo:{type:Object,default:null}},mounted:function(){console.log(this._uid)},watch:{playerinfo:function(t,e){console.log("playerinfo 发生变化"),this.playinfo=t,this.playinfo&&""!==this.playinfo.playtype&&(this.playtype=this.playinfo.playtype)}},jessibuca:null,data:function(){return{isPlaybackPause:!1,useWebGPU:!1,isInit:!1,playinfo:{},playtype:"play",operateBtns:{}}},beforeDestroy:function(){},created:function(){this.playinfo=this.playerinfo,this.playinfo&&""!==this.playinfo.playtype&&(this.playtype=this.playinfo.playtype),this.init()},methods:{init:function(){var t=this,e="gpu"in navigator;e?(console.log("支持webGPU"),this.useWebGPU=!0):(console.log("暂不支持webGPU，降级到webgl渲染"),this.useWebGPU=!1);var i=this.isMobile()||this.isPad();i&&window.VConsole&&new window.VConsole,this.$nextTick((function(){t.initplayer()}))},initplayer:function(){this.isPlaybackPause=!1,this.initconf(),r[this._uid]=new window.JessibucaPro({container:this.$refs.container,decoder:"/js/jessibuca-pro/decoder-pro.js",videoBuffer:Number(.2),isResize:!1,useWCS:!1,useMSE:!1,useSIMD:!0,wcsUseVideoRender:!1,loadingText:"加载中",debug:!1,showBandwidth:!0,showPlaybackOperate:!0,operateBtns:this.operateBtns,forceNoOffscreen:!0,isNotMute:!1,showPerformance:!1,playbackForwardMaxRateDecodeIFrame:4,useWebGPU:this.useWebGPU});var t=r[this._uid];this.initcallback(t),this.isInit=!0},initconf:function(){"play"===this.playtype?this.operateBtns={fullscreen:!0,zoom:!0,ptz:!0,play:!0}:this.operateBtns={fullscreen:!0,zoom:!0,play:!0,ptz:!1}},initcallback:function(t){var e=this;t.on("error",(function(t){console.log("error"),console.log(t),e.destroy()})),t.on("pause",(function(t){console.log("pause success!"),console.log(t)})),t.on("stats",(function(t){console.log("stats is",t)})),t.on("timeout",(function(){console.log("timeout")})),t.on("playbackPreRateChange",(function(e){t.forward(e)}));var i=0,n=0;t.on("timeUpdate",(function(t){n=parseInt(t/6e4),i!==n&&i++})),t.on(JessibucaPro.EVENTS.ptz,(function(t){console.log("ptz arrow",t),e.handlePtz(t)}))},registercallback:function(t,e){r[this._uid]&&r[this._uid].on(t,e)},isMobile:function(){return/iphone|ipad|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase())},isPad:function(){return/ipad|android(?!.*mobile)|tablet|kindle|silk/i.test(window.navigator.userAgent.toLowerCase())},play:function(t){r[this._uid]&&r[this._uid].play(t)},pause:function(){r[this._uid]&&r[this._uid].pause()},replay:function(t){var e=this;r[this._uid]?r[this._uid].destroy().then((function(){e.initplayer(),e.play(t)})):(this.initplayer(),this.play(t))},handlePtz:function(t){var e=0,i=0;"left"===t?e=2:"right"===t?e=1:"up"===t?i=1:"down"===t&&(i=2);var n={leftRight:e,upDown:i,moveSpeed:125};this.playinfo&&""!==this.playinfo.playtype&&Object(l["c"])(this.playinfo.deviceId,this.playinfo.channelId,n).then(function(){var t=Object(s["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},playback:function(t,e){r[this._uid]&&(r[this._uid].playback(t,{playList:e,fps:25,showControl:!0,showRateBtn:!0,isUseFpsRender:!0,isCacheBeforeDecodeForFpsRender:!1,supportWheel:!0,rateConfig:[{label:"正常",value:1},{label:"2倍",value:2},{label:"4倍",value:4},{label:"8倍",value:8}]}),this.isPlaybackPause=!1)},playbackPause:function(){r[this._uid]&&(r[this._uid].playbackPause(),this.isPlaybackPause=!0)},replayback:function(t,e){var i=this;r[this._uid]?r[this._uid].destroy().then((function(){i.initplayer(),i.playback(t,e)})):(this.initplayer(),this.playback(t,e))},destroy:function(){var t=this;r[this._uid]&&r[this._uid].destroy().then((function(){t.initplayer()}))},close:function(){r[this._uid]&&r[this._uid].close()}}},u=c,p=(i("0913"),i("2877")),d=Object(p["a"])(u,n,o,!1,null,"f44903e0",null);e["default"]=d.exports},f5a7:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return l}));var n=i("b775");function o(t){return Object(n["a"])({url:"/sip/device/listchannel/"+t,method:"get"})}function a(t){return Object(n["a"])({url:"/sip/device/sipid/"+t,method:"delete"})}function s(t,e,i){return Object(n["a"])({url:"/sip/ptz/direction/"+t+"/"+e,method:"post",data:i})}function l(t,e,i){return Object(n["a"])({url:"/sip/ptz/scale/"+t+"/"+e,method:"post",data:i})}}}]);